---

title: "게임수학&물리 003_각도"
date: 2019-03-05 18:45:00 -0400
categories: "게임수학&물리"
comments: true

---

## 각도

**각도**는 회전량을 나타내는 단위, 선분과 선분의 벌어진 정도를 나타낸다.

각도를 표시하는 단위는 **도(degree)**로 º로도 나타낼 수 있다.



물체가 공간에 있따는 것과 그 물체가 움직이는 것을 표현하려면 이전에 설명한 좌표와 벡터를 사용해야 하고, 이들의 기준이 되는 축도 있어야 한다.



(x, y)에 있는 물체가 45도로 비스듬하게 (a, a) 만큼 움직였다고 했을 때, 가로벡터가 (a, 0),  세로 벡터가 (0, a) 이긴 하지만, 그 길이를 a로 잡으면 안될 것이다.(피타고라스 정리로 길이를 구하면 이가 아닌 것을 알 수 있다.)

이렇게 비스듬하게 이동하는 벡터의 길이를 구하는 데에는 삼각 함수를 필요로 한다.

------



## 삼각 함수

**삼각함수**는 삼각형의 세 각 중 하나가 수직인 삼각형인 **직각삼각형일 때에만 성립**한다.

삼각함수는 직각삼각형의 각 변*(빗변 l, 밑변 x, 대변 y)*을 조합해 나누는 것이 기본이다.

삼각함수에는 sin(사인), cos(코사인), tan(탄젠트)가 있는데 구하는 공식은 다음과 같다.
$$
sin\theta = y / l
$$

$$
cos\theta = x/l
$$

$$
tan\theta = y/x
$$



#### 삼각 함수와 삼각형의 크기

삼각 함수의 **결과 값은 빗변, 밑변, 대변의 길이에 영향을 받지 않는다.**

| 밑변 | 대변 | 빗변 |
| ---- | ---- | ---- |
| 1    | 1    | 1√2  |
| 2    | 2    | 2√2  |
| a    | a    | a√2  |

45도 직각삼각형일 때 각 변의 길이는 위 표와 같은데, 위 결과를 보면

삼각형의 모양이 같고 세 각이 같을 때, 각 변의 길이가 비례한다는 것을 알 수 있다.

따라서 삼각 함수는 각도만을 고려한다고 할 수 있고, 이는 결과 값은 변들의 길이에 영향을 받지 않는다는 것을 알 수 있다.



이러한 성질을 이용하면 빗변의 길이가 1인 삼각형이 있다고 가정할 때 sin과 cos 값이 밑변과 대변의 길이와 일치하다는 것을 알 수 있다.

------

## 역삼각함수

삼각 함수는 각도를 넣어서 결과 값을 계산하는데, **역삼각 함수**는 삼각 함수의 결과값을 넣어서 각도를 계산한다.

**삼각 함수**
$$
sin45º = 1\sqrt2
$$
**역삼각 함수**
$$
sin^{-1}(1\sqrt2) = 45º
$$
sin^(-1)을 arcsin으로 쓸 수 있다.



역삼각함수 중에서 arctan을 이용하면 플레이어와 장애물 사이의 대각선 길이를 쉽게 구할 수 있다.

플레이어 좌표를 (a, b), 장애물 좌표를 (c, d)라고 가정할 때, 밑변은 c-a, 대변은d-b로 설정 가능하고, arctan을 이용하면 플레이어와 장애물 사이의 거리를 알 수 있게 된다.

------

## 내적

**내적**은 두 벡터 사이의 연산이고, 두 벡터의 x, y 성분을 각각 곱한 후 더한 것이 내적 값이다.

내적을 이용하면 줄체 사이 공간에 다른 물체가 어떻게 있는지 효과적으로 계산할 수 있다.



벡터가 2개 있다고 가정할 때 두 벡터를 내적하면 아래와 같이 된다.
$$
내적 = V_0·V_1 = (x_0 * x_1) + (y_0 * y_1)
$$
이 때 두 벡터의 크기가 1로 정규화 되어 있다고 가정하면 다음과 같은 특징이 있다.
$$
V_0·V_1 = cos\theta
$$
정규화된 두 벡터의 내적은 두 벡터가 이루는 각도의 cos값과 같다.

이를 이용하여 arccos을 이용하면 두 벡터가 이루는 각도를 계산할 수 있다.

두 벡터가 이루는 각도를 계산하면 예를 들어 플레이어 기준으로 장애물이 어디에 있는지 알 수 있다.



정규화 되지 않은 두 벡터를 내적했을 때는 다음과 같은 결과가 나온다.

| 내적 값     | 두 벡터가 이루는 각도 |
| ----------- | --------------------- |
| 0보다 작다. | 90도보다 작다.        |
| 0           | 90도                  |
| 0보다 크다. | 90도보다 크다.        |

두 물체 사이의 각도가 90도인지 아닌지 판단할 경우 벡터를 정규화 하지 않고 내적을 하면 쉽게 구할 수 있다.

------



## 프로그램에서 삼각 함수

C언어에서 삼각 함수를 사용할 때에는 math.h에 포함된 함수들을 이용하면 쉽게 사용 가능하다.

sin, cos, tan에 대응해 각각  float용으로 sinf, cosf, tanf가 있고, double용으로 sin, cos, tan이 있다.

단, 컴퓨터에서 각도를 인식시킬 때 위에서 사용한 도수법을 사용하는 것이 아니라 **호도법**으로 표현된 각도 값, 즉 **라디안으로 표기한 각**도 값을 전달해야 한다.

**호도법**은 각도를 표현할 때 호의 길이로 각도를 재는 것이다.(즉, 호의 길이가 곧 각도가 된다.)

호도법에서는 반지름이 1인 원이라고 가정하고 각도를 계산하는데, 반지름이 1일 때 원주의 길이는 2π가 된다. 그러므로 360도 = 2π가 되는 것이다. 이를 이용하면 180도 = 360도/2 = 2π/2 = π가 되고, 45도 = 180도/4 = π/4가 된다.

C언어에서 π를 사용하려면 math.h를 포함시킨 뒤 M_PI를 호출하면 된다.

------



## 각도의 정규화

각도는 360도로 한 바퀴를 도는데, 쉽게 말해 0도는 360도와 같고 720도와도 같다. 

**각도의 정규화**는 각도 값을 0 ~ 2π 혹은 -π ~ π로 만들어 360도 범위에 각도를 제한하는 처리를 의미한다.

예를들어 3π는 π로 -π/2는 3π2로 바뀌게 된다.



각도의 정규화를 하지 않으면 예상치 못한 버그가 발생할 수 있다.

예를들어 무한히 회전하는 물체의 경우 일정 각도 값을 계속해서 더해주면 계속해서 회전할 것이다.(360도로 한 바퀴를 돌기 때문에)

하지만 시간이 지나면 움직이지 않게 되는데, 각도값이 엄청나게 커지면 부동소수점수의 정밀도 문제에 의해서 작은 값을 더해도 무시되어 각도가 변하지 않게 되는 것이다.

따라서 상황에 따라 각도를 적절히 정규화 해야 한다.

------
> 본 내용은 도마에 요시키의 "게임을 움직이는 수학과 물리"를 읽으며 공부, 요약한 내용입니다.